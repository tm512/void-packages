# Template file for 'snes9x-gtk'
pkgname=snes9x-gtk
version=1.61
revision=1
_spirvcrossver=1458bae62ec67ea7d12c5a13b740e23ed4bb226c
_glslangver=bcf6a2430e99e8fc24f9f266e99316905e6d5134
wrksrc="snes9x-${version}"
create_wrksrc=yes
build_wrksrc="snes9x-${version}/gtk"
build_style=meson
hostmakedepends="gettext-devel glib-devel pkg-config intltool"
makedepends="minizip-devel gtk+3-devel gtkmm-devel SDL2-devel xorg-server-devel"
short_desc="SNES Emulator"
maintainer="Hinterwaeldlers <mguethle@xunit.de>"
license="custom:noncommercial-MIT-like, LGPL-2.1-or-later, GPL-2.0-only, LGPL-2.1-only, GPL-3.0-only"
homepage="http://www.snes9x.com/"
distfiles="https://github.com/snes9xgit/snes9x/archive/${version}.tar.gz
 https://github.com/KhronosGroup/SPIRV-Cross/archive/${_spirvcrossver}.tar.gz
 https://github.com/KhronosGroup/glslang/archive/${_glslangver}.tar.gz"
checksum="ce7aad69c3041ba4c33690e9e7d21ceb1b9283d85759b1bf683dfb8c473511bb
 6ad0c3c9492699e46bd16d6ef8cacd8bb74b02b032d3ee3f16a6335554efc45f
 a3e604397adb2224178d3eb409eab8b8c13a96a42432483d498105c90828c380"

nocross="cannot run test program while cross compiling"

post_extract() {
	rm -rf snes9x-${version}/shaders/{SPIRV-Cross,glslang}
	mv SPIRV-Cross-${_spirvcrossver} snes9x-${version}/shaders/SPIRV-Cross
	mv glslang-${_glslangver} snes9x-${version}/shaders/glslang
}

post_install() {
	vlicense ../LICENSE
}
